<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Report for {ticker_name}</title>
    <link href="report_style.css" rel="stylesheet"/>
    <script src="https://code.highcharts.com/stock/highstock.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highcharts@9.3.0/modules/annotations.js"></script>
</head>
<body>
<main>
    <header>
        <div class="report-header">
            <div>
                <h1>Stock Report for {ticker_name}</h1>
                <h2 class="report-date">Date: {report_date}</h2>
            </div>
            <img src="Logo.png" alt="Your Logo" class="header-logo">
        </div>
    </header>

    <section class="stock-data">
        <button class="collapsible">Stock Table</button>
        <div class="collapsible-content"> 
            <div class="table-container">
                <div class="scrollable-table" data-name="mainScrollableTable">
                        {table}
                </div>
            </div>
        </div>

        <div id="candlestick-chart" data-name="mainChart" style="width: 100%; height: 600px;"></div>
    </section>
        <section class="indicator-section">
            <button class="collapsible">SMA Indicators and Description</button>
            <div class="collapsible-content">
                <div class="sma-values">
                    <p><strong>SMA10:</strong> {sma10_value}</p>
                    <p><strong>SMA50:</strong> {sma50_value}</p>
                    <p><strong>SMA200:</strong> {sma200_value}</p> 
                </div>
                <button class="collapsible">Stock Table _ SMA</button>
                <div class="collapsible-content"> 
                    <div class="table-container">
                        <div class="smaScrollableTable">

                                {table_sma}

                        </div>
                    </div>
                </div>

                <div id="candlestick-chart_sma" data-name="smaChart" style="width: 100%; height: 600px;"></div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                        <tr>
                            <th scope="col">Flag Name</th>
                            <th scope="col">Flag Value</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>Golden Cross</td>
                            <td><span class="green">{golden_cross_flag}</span></td>
                        </tr>
                        <tr>
                            <td>Death Cross</td>
                            <td><span class="red">{death_cross_flag}</span></td>
                        </tr>
                        <tr>
                            <td>Price Cross SMA10 Up</td>
                            <td>{price_cross_sma10_up_flag}</td>
                        </tr>
                        <tr>
                            <td>Price Cross SMA10 Down</td>
                            <td>{price_cross_sma10_down_flag}</td>
                        </tr>
                        <tr>
                            <td>Price Cross SMA50 Up</td>
                            <td>{price_cross_sma50_up_flag}</td>
                        </tr>
                        <tr>
                            <td>Price Cross SMA50 Down</td>
                            <td>{price_cross_sma50_down_flag}</td>
                        </tr>
                        <tr>
                            <td>Price Cross SMA200 Up</td>
                            <td>{price_cross_sma200_up_flag}</td>
                        </tr>
                        <tr>
                            <td>Price Cross SMA200 Down</td>
                            <td>{price_cross_sma200_down_flag}</td>
                        </tr>
                        <tr>
                            <td>SMA10 Cross SMA200 Up</td>
                            <td>{sma10_cross_sma200_up_flag}</td>
                        </tr>
                        <tr>
                            <td>SMA10 Cross SMA200 Down</td>
                            <td>{sma10_cross_sma200_down_flag}</td>
                        </tr>
                        <tr>
                            <td>SMA10 Up</td>
                            <td>{sma10_up_flag}</td>
                        </tr>
                        <tr>
                            <td>SMA50 Up</td>
                            <td>{sma50_up_flag}</td>
                        </tr>
                        <tr>
                            <td>SMA200 Up</td>
                            <td>{sma200_up_flag}</td>
                        </tr>
                        <tr>
                            <td>SMA10 Above SMA50</td>
                            <td>{sma10_above_sma50_flag}</td>
                        </tr>
                        <tr>
                            <td>SMA50 Above SMA200</td>
                            <td>{sma50_above_sma200_flag}</td>
                        </tr>
                        <tr>
                            <td>Price Distance from SMA10</td>
                            <td>{Price_Distance_SMA10}</td>
                        </tr>
                        <tr>
                            <td>Price Distance from SMA50</td>
                            <td>{Price_Distance_SMA50}</td>
                        </tr>
                        <tr>
                            <td>Price Distance from SMA200</td>
                            <td>{Price_Distance_SMA200}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <article class="description-box">
                    <h3>Golden Death Cross Description:</h3>
                    <p>{golden_death_cross_desc}</p>
                </article>
                <article class="description-box">
                    <h3>Price SMA10 Crossover Description:</h3>
                    <p>{price_sma10_crossover_desc}</p>
                </article>
                <article class="description-box">
                    <h3>Price Crossover Description:</h3>
                    <p>{price_crossover_desc}</p>
                </article>
                <article class="description-box">
                    <h3>Price SMA200 Crossover Description:</h3>
                    <p>{price_sma200_crossover_desc}</p>
                </article>
                <article class="description-box">
                    <h3>SMA10 SMA200 Crossover Description:</h3>
                    <p>{sma10_sma200_crossover_desc}</p>
                </article>
                <article class="description-box">
                    <h3>SMA Slopes Description:</h3>
                    <p>{sma_slopes_desc}</p>
                </article>
                <article class="description-box">
                    <h3>Price Distance SMA10 Description:</h3>
                    <p>{price_distance_sma10_desc}</p>
                </article>
                <article class="description-box">
                    <h3>Price Distance SMA50 Description:</h3>
                    <p>{price_distance_sma50_desc}</p>
                </article>
                <article class="description-box">
                    <h3>Price Distance SMA200 Description:</h3>
                    <p>{price_distance_sma200_desc}</p>
                </article>
                <article class="description-box">
                    <h3>SMA Relationship 10-50 Description:</h3>
                    <p>{sma_relationship_10_50_desc}</p>
                </article>
                <article class="description-box">
                    <h3>SMA Relationship 50-200 Description:</h3>
                    <p>{sma_relationship_50_200_desc}</p>
                </article>
            </div>
       
            <button class="collapsible">RSI_9 Indicator and Description</button>
            <div class="collapsible-content">
                <div class="indicator-values">
                    <p><strong>RSI_9 Value:</strong> {RSI_9}</p>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th scope="col">Flag Name</th>
                                <th scope="col">Flag Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Overbought</td>
                                <td>{RSI_9_Overbought_Flag}</td>
                            </tr>
                            <tr>
                                <td>Oversold</td>
                                <td>{RSI_9_Oversold_Flag}</td>
                            </tr>
                            <tr>
                                <td>Neutral</td>
                                <td>{RSI_9_Neutral_Flag}</td>
                            </tr>
                            <tr>
                                <td>Bearish Divergence</td>
                                <td>{RSI_9_Bearish_Divergence_Flag}</td>
                            </tr>
                            <tr>
                                <td>Bullish Divergence</td>
                                <td>{RSI_9_Bullish_Divergence_Flag}</td>
                            </tr>
                            <tr>
                                <td>Swing Failure (Buy)</td>
                                <td>{RSI_9_Swing_Failure_Buy_Flag}</td>
                            </tr>
                            <tr>
                                <td>Swing Failure (Sell)</td>
                                <td>{RSI_9_Swing_Failure_Sell_Flag}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <article class="description-box">
                    <h3>Overbought & Oversold Description:</h3>
                    <p>{RSI_9_Overbought_Oversold_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>Divergence Description:</h3>
                    <p>{RSI_9_Divergence_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>Swings Description:</h3>
                    <p>{RSI_9_Swings_Desc}</p>
                </article>
            </div>

            <button class="collapsible">RSI_14 Indicator and Description</button>
            <div class="collapsible-content">
                <div class="indicator-values">
                    <p><strong>RSI_14 Value:</strong> {RSI_14}</p>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th scope="col">Flag Name</th>
                                <th scope="col">Flag Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Overbought</td>
                                <td>{RSI_14_Overbought_Flag}</td>
                            </tr>
                            <tr>
                                <td>Oversold</td>
                                <td>{RSI_14_Oversold_Flag}</td>
                            </tr>
                            <tr>
                                <td>Neutral</td>
                                <td>{RSI_14_Neutral_Flag}</td>
                            </tr>
                            <tr>
                                <td>Bearish Divergence</td>
                                <td>{RSI_14_Bearish_Divergence_Flag}</td>
                            </tr>
                            <tr>
                                <td>Bullish Divergence</td>
                                <td>{RSI_14_Bullish_Divergence_Flag}</td>
                            </tr>
                            <tr>
                                <td>Swing Failure (Buy)</td>
                                <td>{RSI_14_Swing_Failure_Buy_Flag}</td>
                            </tr>
                            <tr>
                                <td>Swing Failure (Sell)</td>
                                <td>{RSI_14_Swing_Failure_Sell_Flag}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <article class="description-box">
                    <h3>Overbought & Oversold Description:</h3>
                    <p>{RSI_14_Overbought_Oversold_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>Divergence Description:</h3>
                    <p>{RSI_14_Divergence_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>Swings Description:</h3>
                    <p>{RSI_14_Swings_Desc}</p>
                </article>
            </div>
       
            <button class="collapsible">RSI_25 Indicator and Description</button>
            <div class="collapsible-content">
                <div class="indicator-values">
                    <p><strong>RSI_14 Value:</strong> {RSI_25}</p>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th scope="col">Flag Name</th>
                                <th scope="col">Flag Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Overbought</td>
                                <td>{RSI_25_Overbought_Flag}</td>
                            </tr>
                            <tr>
                                <td>Oversold</td>
                                <td>{RSI_25_Oversold_Flag}</td>
                            </tr>
                            <tr>
                                <td>Neutral</td>
                                <td>{RSI_25_Neutral_Flag}</td>
                            </tr>
                            <tr>
                                <td>Bearish Divergence</td>
                                <td>{RSI_25_Bearish_Divergence_Flag}</td>
                            </tr>
                            <tr>
                                <td>Bullish Divergence</td>
                                <td>{RSI_25_Bullish_Divergence_Flag}</td>
                            </tr>
                            <tr>
                                <td>Swing Failure (Buy)</td>
                                <td>{RSI_25_Swing_Failure_Buy_Flag}</td>
                            </tr>
                            <tr>
                                <td>Swing Failure (Sell)</td>
                                <td>{RSI_25_Swing_Failure_Sell_Flag}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <article class="description-box">
                    <h3>Overbought & Oversold Description:</h3>
                    <p>{RSI_25_Overbought_Oversold_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>Divergence Description:</h3>
                    <p>{RSI_25_Divergence_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>Swings Description:</h3>
                    <p>{RSI_25_Swings_Desc}</p>
                </article>
            </div>

            <button class="collapsible">STOCHk_9_6_3 Indicator and Description</button>
            <div class="collapsible-content">

                <!-- Indicator Values -->
                <div class="indicator-values">
                    <p><strong>STOCHk_9_6_3 Value:</strong> {STOCHk_9_6_3}</p>
                    <p><strong>STOCHd_9_6_3 Value:</strong> {STOCHd_9_6_3}</p>
                </div>

                <!-- Table for Flags -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th scope="col">Flag Name</th>
                                <th scope="col">Flag Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Overbought</td>
                                <td>{STOCH_9_6_3_Overbought_Flag}</td>
                            </tr>
                            <tr>
                                <td>Oversold</td>
                                <td>{STOCH_9_6_3_Oversold_Flag}</td>
                            </tr>
                            <tr>
                                <td>Bullish Crossover</td>
                                <td>{STOCH_9_6_3_Bullish_Crossover_Flag}</td>
                            </tr>
                            <tr>
                                <td>Bearish Crossover</td>
                                <td>{STOCH_9_6_3_Bearish_Crossover_Flag}</td>
                            </tr>
                            <tr>
                                <td>Bullish Divergence</td>
                                <td>{STOCH_9_6_3_Bullish_Divergence_Flag}</td>
                            </tr>
                            <tr>
                                <td>Bearish Divergence</td>
                                <td>{STOCH_9_6_3_Bearish_Divergence_Flag}</td>
                            </tr>
                            <tr>
                                <td>Midpoint Cross Up</td>
                                <td>{STOCH_9_6_3_Midpoint_Cross_Up_Flag}</td>
                            </tr>
                            <tr>
                                <td>Midpoint Cross Down</td>
                                <td>{STOCH_9_6_3_Midpoint_Cross_Down_Flag}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Description Articles -->
                <article class="description-box">
                    <h3>Overbought & Oversold Description:</h3>
                    <p>{STOCH_9_6_3_Overbought/Oversold_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>Divergence Description:</h3>
                    <p>{STOCH_9_6_3_Divergence_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>Swings Description:</h3>
                    <p>{STOCH_9_6_3_Swings_Desc}</p>
                </article>
            </div>
            <button class="collapsible">CMF_20 Indicators and Description</button>
            <div class="collapsible-content">
                
                <!-- CMF_20 Value -->
                <div class="cmf-values">
                    <p><strong>CMF_20:</strong> {CMF_20}</p>
                </div>
                
                <!-- Flag Indicators Table for CMF_20 -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th scope="col">Flag Name</th>
                                <th scope="col">Flag Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>CMF Positive</td><td>{CMF_Positive_Flag}</td></tr>
                            <tr><td>CMF Negative</td><td>{CMF_Negative_Flag}</td></tr>
                            <tr><td>CMF Neutral</td><td>{CMF_Neutral_Flag}</td></tr>
                            <tr><td>CMF Zero Crossover Up</td><td>{CMF_Zero_Crossover_Up_Flag}</td></tr>
                            <tr><td>CMF Zero Crossover Down</td><td>{CMF_Zero_Crossover_Down_Flag}</td></tr>
                            <tr><td>CMF Above SMA50</td><td>{CMF_Above_SMA50_Flag}</td></tr>
                            <tr><td>CMF Below SMA50</td><td>{CMF_Below_SMA50_Flag}</td></tr>
                            <tr><td>CMF Overbought</td><td>{CMF_Overbought_Flag}</td></tr>
                            <tr><td>CMF Oversold</td><td>{CMF_Oversold_Flag}</td></tr>
                            <tr><td>CMF Bullish Divergence</td><td>{CMF_Bullish_Divergence_Flag}</td></tr>
                            <tr><td>CMF Bearish Divergence</td><td>{CMF_Bearish_Divergence_Flag}</td></tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Description Boxes for CMF_20 -->
                <article class="description-box">
                    <h3>CMF Value Range Description:</h3>
                    <p>{CMF_Value_Range_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>CMF Zero Crossover Description:</h3>
                    <p>{CMF_Zero_Crossover_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>CMF SMA Comparison Description:</h3>
                    <p>{CMF_SMA_Comparison_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>CMF Overbought/Oversold Description:</h3>
                    <p>{CMF_Overbought_Oversold_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>CMF Divergence Description:</h3>
                    <p>{CMF_Divergence_Desc}</p>
                </article>
                
            </div>
            <button class="collapsible">MACD_12_26_9 Indicators and Description</button>
            <div class="collapsible-content">
                
                <!-- CMF_20 Value -->
                <div class="cmf-values">
                    <p><strong>MACD Value:</strong> {MACD_12_26_9}</p>
                    <p><strong>MACD Signal:</strong> {MACDs_12_26_9}</p>
                    <p><strong>MACD Histogram:</strong> {MACDh_12_26_9}</p>
                </div>
                
                <!-- Flag Indicators Table for CMF_20 -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th scope="col">Flag Name</th>
                                <th scope="col">Flag Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>MACD Bullish Crossover</td><td>{MACD_Bullish_Crossover_Flag}</td></tr>
                            <tr><td>MACD Bearish Crossover</td><td>{MACD_Bearish_Crossover_Flag}</td></tr>
                            <tr><td>MACD Above Zero</td><td>{MACD_Above_Zero_Flag}</td></tr>
                            <tr><td>MACD Below Zero</td><td>{MACD_Below_Zero_Flag}</td></tr>
                            <tr><td>MACD Bullish Divergence</td><td>{MACD_Bullish_Divergence_Flag}</td></tr>
                            <tr><td>MACD Bearish Divergence</td><td>{MACD_Bearish_Divergence_Flag}</td></tr>
                            <tr><td>MACD Histogram Positive</td><td>{MACD_Histogram_Positive_Flag}</td></tr>
                            <tr><td>MACD Histogram Negative</td><td>{MACD_Histogram_Negative_Flag}</td></tr>
                            <tr><td>MACD Histogram Reversal Positive</td><td>{MACD_Histogram_Reversal_Positive_Flag}</td></tr>
                            <tr><td>MACD Histogram Reversal Negative</td><td>{MACD_Histogram_Reversal_Negative_Flag}</td></tr>
                            <tr><td>MACD Trending Up</td><td>{MACD_Trending_Up_Flag}</td></tr>
                            <tr><td>MACD Trending Down</td><td>{MACD_Trending_Down_Flag}</td></tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Description Boxes for CMF_20 -->
                <article class="description-box">
                    <h3>MACD Crossover Desc Description:</h3>
                    <p>{MACD_Crossover_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>MACD Zero Line Description:</h3>
                    <p>{MACD_Zero_Line_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>MACD Divergence Description:</h3>
                    <p>{MACD_Divergence_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>MACD Histogram Description:</h3>
                    <p>{MACD_Histogram_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>MACD Histogram Reversal Description:</h3>
                    <p>{MACD_Histogram_Reversal_Desc}</p>
                </article>
                <article class="description-box">
                    <h3>MACD Trend Description:</h3>
                    <p>{MACD_Trend_Desc}</p>
                </article>
            </div>
        </section>
</main>
<a href="#">Back to Top</a>
<footer>&copy; 2023 The Iraqi Investor. All Rights Reserved.</footer>


<script>
document.addEventListener("DOMContentLoaded", function() {
    var coll = document.getElementsByClassName("collapsible");
    var maxHeight = "10000px";  // An arbitrary value; adjust as needed based on your content
    
    for (var i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", toggleCollapsible);      
        coll[i].addEventListener("touchend", handleTouchEnd);
        
        if (coll[i].classList.contains('active')) {
            toggleCollapsible.call(coll[i]);
        }
    }

    function handleTouchEnd(event) {
        event.preventDefault();
        toggleCollapsible.call(this, event);
    }
    
    function toggleCollapsible(event) {
        this.classList.toggle("active");
        var content = this.nextElementSibling;
        if (content.style.maxHeight && content.style.maxHeight !== "0px") {
            content.style.maxHeight = "0px";
        } else {
            content.style.maxHeight = maxHeight;
        } 
    }

    function processTable(table) {
        var rows = table.querySelectorAll("tbody tr");  // Get all rows in the table body
        rows.forEach(function(row) {
            var changeCell = row.querySelector("td:nth-child(6)");  // Change column
            var changePercentCell = row.querySelector("td:nth-child(7)");  // Change% column

            // For Change column
            if (parseFloat(changeCell.textContent) < 0) {
                changeCell.classList.add("negative");
            } else {
                changeCell.classList.add("positive");
            }

            // For Change% column
            var changePercentValue = parseFloat(changePercentCell.textContent.replace('%', ''));  // Extract the float value
            if (changePercentValue < 0) {
                changePercentCell.classList.add("negative");
            } else {
                changePercentCell.classList.add("positive");
            }
            changePercentCell.textContent = changePercentValue.toFixed(2) + '%';  // Append the % sign back
        });
    }

    // Target the main table
    var mainTable = document.querySelector('div.scrollable-table[data-name="mainScrollableTable"] table');
    if (mainTable) {
        processTable(mainTable);
    }


    // Add more tables by name as needed...
});

</script>
<script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
<script>
    // Function to extract data from the main table
    document.addEventListener("DOMContentLoaded", function() {
    // Function to extract data from main table
    function extractDataFromMainTable() {
        const table = document.querySelector('div.scrollable-table[data-name="mainScrollableTable"] table');
        const rows = table.querySelectorAll('tr');
        const data = {
            candlestick: [],
            volume: []
        };

        // Skip the first row since it's headers
        for (let i = 1; i < rows.length; i++) {
            const cells = rows[i].querySelectorAll('td');
            const date = Date.parse(cells[0].textContent.trim());
            const open = parseFloat(cells[2].textContent.trim());
            const high = parseFloat(cells[3].textContent.trim());
            const low = parseFloat(cells[4].textContent.trim());
            const close = parseFloat(cells[1].textContent.trim());
            const volume = parseFloat(cells[7].textContent.trim().replace(/,/g, '')); // Removing commas

            data.candlestick.push([date, open, high, low, close]);
            data.volume.push([date, volume]);
        }

        return data;
    }

    const mainData = extractDataFromMainTable();

    Highcharts.stockChart('candlestick-chart', {
    chart: {
        backgroundColor: '#f5f5f5',  // Lighter background
        style: {
            fontFamily: 'Arial, sans-serif'
        },
        panning: true,
        pinchType: 'x'
    },
    legend: {
    enabled: true,
    layout: 'horizontal',
    align: 'center',
    verticalAlign: 'top',
    borderWidth: 0,
    floating: true
},

zoomType: 'xy',
    tooltip: {
        split: true,
        valueDecimals: 2,
        borderColor: '#8a8a8a',
        shadow: false,
        headerFormat: '<b>{point.x:%A, %b %e, %Y}</b><br/>',
        backgroundColor: 'rgba(255, 255, 255, 0.7)',
        borderRadius: 5,
        style: {
            fontWeight: 'bold'
        },
        crosshairs: [{
            width: 2,
            color: 'gray',
            dashStyle: 'shortdot'
        }, {
            width: 2,
            color: 'gray',
            dashStyle: 'shortdot'
        }],
 
    },
    yAxis: [{
        title: {
            text: 'Stock Price'
        },
        height: '90%',
        lineWidth: 2,
        gridLineColor: '#e6e6e6',  // Lighter gridlines
        plotLines: [{
        value: Math.max(...mainData.candlestick.map(point => point[2])),  // 52-week high
        color: '#FF4136',  // Light red for 52-week high
        dashStyle: 'ShortDash',
        width: 1,
        label: {
            text: '52-week high',
            align: 'left'
        }
    }, {
        value: Math.min(...mainData.candlestick.map(point => point[3])),  // 52-week low
        color: '#3D9970',  // Light green for 52-week low
        dashStyle: 'ShortDash',
        width: 1,
        label: {
            text: '52-week low',
            align: 'left'
        }
    }]
}, {
    title: {
        text: 'Volume'
    },
    top: '90%',
    height: '10%',
    offset: 0,
    lineWidth: 2
}
],
    series: [{
        type: 'candlestick',
        data: mainData.candlestick,
        name: 'Stock Price',
        yAxis: 0,
        color: '#FF4136',  // More beautiful shade of red
        upColor: '#3D9970',  // More beautiful shade of green
        lineColor: '#FF4136',  // Line color for downward movement
        upLineColor: '#3D9970'  // Line color for upward movement
    }, {
        type: 'column',
        data: mainData.volume,
        name: 'Volume',
        color: '#95a5a6',  // Neutral color for volume
        yAxis: 1
    }],
    rangeSelector: {
    buttonTheme: {
        fill: '#e6e6e6',
        stroke: '#c4c4c4',
        style: {
            color: '#333',
            fontWeight: 'bold'
        },
        states: {
            hover: {
                fill: '#d4d4d4'
            },
            select: {
                fill: '#c4c4c4',
                style: {
                    color: 'white'
                }
            }
        }
    },
    inputBoxBorderColor: '#c4c4c4',
    inputBoxHeight: 18,
    inputBoxWidth: 120,
    inputStyle: {
        fontSize: '10px',
        color: '#333'
    },
    labelStyle: {
        color: '#666',
        fontWeight: 'bold'
    }
},
navigator: {
    maskFill: 'rgba(170, 205, 170, 0.3)',  // Light green mask
    series: {
        color: '#2ecc71',
        lineColor: '#2ecc71'
    },
    height: 15  // Adjust this value to set the desired height
},

    scrollbar: {
        enabled: false,
        
    }
});
});
    // Function to extract data from the SMA table
    document.addEventListener("DOMContentLoaded", function() {
    // Function to extract data from the SMA table
    function extractDataFromSMATable() {
        const table = document.querySelector('div.table-container .smaScrollableTable table');
        const rows = table.querySelectorAll('tr');
        const data = {
            candlestick: [],
            volume: [],
            sma10: [],
            sma50: [],
            sma200: []
        };

        for (let i = 1; i < rows.length; i++) {
            const cells = rows[i].querySelectorAll('td');
            const date = Date.parse(cells[0].textContent.trim());
            const open = parseFloat(cells[2].textContent.trim());
            const high = parseFloat(cells[3].textContent.trim());
            const low = parseFloat(cells[4].textContent.trim());
            const close = parseFloat(cells[1].textContent.trim());
            const volume = parseFloat(cells[5].textContent.trim().replace(/,/g, ''));
            const sma10Value = parseFloat(cells[6].textContent.trim());
            const sma50Value = parseFloat(cells[7].textContent.trim());
            const sma200Value = parseFloat(cells[8].textContent.trim());

            data.candlestick.push([date, open, high, low, close]);
            data.volume.push([date, volume]);
            data.sma10.push([date, sma10Value]);
            data.sma50.push([date, sma50Value]);
            data.sma200.push([date, sma200Value]);
        }

        return data;
    }

    const smaData = extractDataFromSMATable();

    Highcharts.stockChart('candlestick-chart_sma', {
        chart: {
            backgroundColor: '#f5f5f5',  // Lighter background
            style: {
                fontFamily: 'Arial, sans-serif'
            },
            panning: true,
            pinchType: 'x'
        },
        legend: {
    enabled: true,
    layout: 'horizontal',
    align: 'center',
    verticalAlign: 'top',
    borderWidth: 0,
    floating: true
},

zoomType: 'xy',
        tooltip: {
            split: true,
            valueDecimals: 2,
            borderColor: '#8a8a8a',
            shadow: false,
            headerFormat: '<b>{point.x:%A, %b %e, %Y}</b><br/>',
            backgroundColor: 'rgba(255, 255, 255, 0.7)',
            borderRadius: 5,
            style: {
                fontWeight: 'bold'
            },
            crosshairs: [{
                width: 2,
                color: 'gray',
                dashStyle: 'shortdot'
            }, {
                width: 2,
                color: 'gray',
                dashStyle: 'shortdot'
            }]
        },
        yAxis: [{
            title: {
                text: 'Stock Price'
            },
            height: '90%',
            lineWidth: 2,
            gridLineColor: '#e6e6e6'  // Lighter gridlines
        }, {
            title: {
                text: 'Volume'
            },
            top: '90%',
            height: '10%',
            offset: 0,
            lineWidth: 2
        }],
        series: [{
            type: 'candlestick',
            data: smaData.candlestick,
            name: 'Stock Price',
            color: '#FF4136',  // More beautiful shade of red
            upColor: '#3D9970',  // More beautiful shade of green
            lineColor: '#FF4136',  // Line color for downward movement
            upLineColor: '#3D9970',  // Line color for upward movement
            yAxis: 0
        }, {
            type: 'line',
            data: smaData.sma10,
            name: 'SMA10',
            yAxis: 0,
            color: '#3498db'  // Shade of blue for SMA10
        }, {
            type: 'line',
            data: smaData.sma50,
            name: 'SMA50',
            yAxis: 0,
            color: '#e67e22'  // Shade of orange for SMA50
        }, {
            type: 'line',
            data: smaData.sma200,
            name: 'SMA200',
            yAxis: 0,
            color: '#8e44ad'  // Shade of purple for SMA200
        }, {
            type: 'column',
            data: smaData.volume,
            name: 'Volume',
            color: '#95a5a6',  // Neutral color for volume
            yAxis: 1
        }],
        rangeSelector: {
            buttonTheme: {
                fill: '#e6e6e6',
                stroke: '#c4c4c4',
                style: {
                    color: '#333',
                    fontWeight: 'bold'
                },
                states: {
                    hover: {
                        fill: '#d4d4d4'
                    },
                    select: {
                        fill: '#c4c4c4',
                        style: {
                            color: 'white'
                        }
                    }
                }
            },
            inputBoxBorderColor: '#c4c4c4',
            inputBoxHeight: 18,
            inputBoxWidth: 120,
            inputStyle: {
                fontSize: '10px',
                color: '#333'
            },
            labelStyle: {
                color: '#666',
                fontWeight: 'bold'
            }
        },
        navigator: {
            maskFill: 'rgba(170, 205, 170, 0.3)',  // Light green mask
            series: {
                color: '#2ecc71',
                lineColor: '#2ecc71'
            },
            height: 15  // Adjust this value to set the desired height
        },
        scrollbar: {
            enabled: false
        }
    });
});
</script>

</body>
</html>
